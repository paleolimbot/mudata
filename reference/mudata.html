<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a mudata object — mudata • mudata2</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a mudata object — mudata" />
<meta property="og:description" content="Create a mudata object, which is a collection of five tables: data,
locations, params, datasets, and columns. You are only required to provide
the data table, which must contain columns &quot;param&quot; and &quot;value&quot;, but will more
typically contain columns &quot;location&quot;, &quot;param&quot;, &quot;datetime&quot; (or &quot;date&quot;), and
&quot;value&quot;. See ns_climate, kentvillegreenwood, alta_lake,
long_lake, and second_lake_temp for examples of data in this
format." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mudata2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/mudata2.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/mudata_create.html">Creating mudata objects</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/paleolimbot/mudata2">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a mudata object</h1>
    <small class="dont-index">Source: <a href='https://github.com/paleolimbot/mudata2/blob/master/R/mudata.R'><code>R/mudata.R</code></a></small>
    <div class="hidden name"><code>mudata.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a mudata object, which is a collection of five tables: data,
locations, params, datasets, and columns. You are only required to provide
the data table, which must contain columns "param" and "value", but will more
typically contain columns "location", "param", "datetime" (or "date"), and
"value". See <a href='ns_climate.html'>ns_climate</a>, <a href='kentvillegreenwood.html'>kentvillegreenwood</a>, <a href='alta_lake.html'>alta_lake</a>,
<a href='long_lake.html'>long_lake</a>, and <a href='second_lake_temp.html'>second_lake_temp</a> for examples of data in this
format.</p>
    </div>

    <pre class="usage"><span class='fu'>mudata</span>(
  <span class='no'>data</span>,
  <span class='kw'>locations</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>params</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>datasets</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>columns</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>x_columns</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>...</span>,
  <span class='kw'>more_tbls</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>dataset_id</span> <span class='kw'>=</span> <span class='st'>"default"</span>,
  <span class='kw'>location_id</span> <span class='kw'>=</span> <span class='st'>"default"</span>,
  <span class='kw'>validate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data.frame/<a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a> containing columns "param" and
"value" (at least), but more typically columns "location", "param",
"datetime" (or "date", depending on the type of data), and "value".</p></td>
    </tr>
    <tr>
      <th>locations</th>
      <td><p>The locations table, which is a data frame containing the
columns (at least) "dataset", and "location". If omitted, it will be
created automatically using all unique dataset/location combinations.</p></td>
    </tr>
    <tr>
      <th>params</th>
      <td><p>The params table, which is a data frame containing the columns
(at least) "dataset", and "param". If omitted, it will be created
automatically using all unique dataset/param combinations.</p></td>
    </tr>
    <tr>
      <th>datasets</th>
      <td><p>The datasets table, which is a data frame containing the
column (at least) "dataset". If omitted, it will be generated automatically
using all unique datasets.</p></td>
    </tr>
    <tr>
      <th>columns</th>
      <td><p>The columns table, which is a data frame containing the
columns (at least) "dataset", "table", and "column". If omitted, it will be
created automatically using all dataset/table/column combinations.</p></td>
    </tr>
    <tr>
      <th>x_columns</th>
      <td><p>A vector of column names from the data table that in
combination with "dataset", "location", and "param" identify unique rows.
These will typically be guessed using the column names between "param" and
"value".</p></td>
    </tr>
    <tr>
      <th>..., more_tbls</th>
      <td><p>More tbls (as named arguments) to be included in the
mudata object</p></td>
    </tr>
    <tr>
      <th>dataset_id</th>
      <td><p>The dataset to use if a "dataset" column is omitted.</p></td>
    </tr>
    <tr>
      <th>location_id</th>
      <td><p>The location if a "location" column is omitted.</p></td>
    </tr>
    <tr>
      <th>validate</th>
      <td><p>Pass <code>FALSE</code> to skip validation of input tables using
<a href='new_mudata.html'>validate_mudata</a>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class "mudata", which is a <a href='https://rdrr.io/r/base/list.html'>list</a> with components
data, locations, params, datasets, columns, and any other tables provided
in <code>more_tbls</code>. All list components must be tbls.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Dunnington DW and Spooner IS (2018). "Using a linked table-based
structure to encode self-describing multiparameter spatiotemporal data".
FACETS. <a href='https://doi.org/10.1139/facets-2017-0026'>doi:10.1139/facets-2017-0026</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># use the data table from kentvillegreenwood as a template</span>
<span class='no'>kg_data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='tbl_data.html'>tbl_data</a></span>(<span class='no'>kentvillegreenwood</span>)
<span class='co'># create mudata object using just the data table</span>
<span class='fu'>mudata</span>(<span class='no'>kg_data</span>)</div><div class='output co'>#&gt; <span class='message'>Guessing x columns: date</span></div><div class='output co'>#&gt; A mudata object aligned along "date"
#&gt;   distinct_datasets():  "ecclimate"
#&gt;   distinct_locations(): "GREENWOOD A", "KENTVILLE CDA CS"
#&gt;   distinct_params():    "cooldegdays", "dirofmaxgust" ... and 9 more
#&gt;   src_tbls():           "data", "locations" ... and 3 more
#&gt; 
#&gt; tbl_data() %&gt;% head():
#&gt; # A tibble: 6 x 6
#&gt;   dataset   location         param   date       value flags
#&gt;   &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;   &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt;
#&gt; 1 ecclimate KENTVILLE CDA CS maxtemp 1999-07-01  28.5 &lt;NA&gt; 
#&gt; 2 ecclimate KENTVILLE CDA CS maxtemp 1999-07-02  30.7 &lt;NA&gt; 
#&gt; 3 ecclimate KENTVILLE CDA CS maxtemp 1999-07-03  26.4 &lt;NA&gt; 
#&gt; 4 ecclimate KENTVILLE CDA CS maxtemp 1999-07-04  28.6 &lt;NA&gt; 
#&gt; 5 ecclimate KENTVILLE CDA CS maxtemp 1999-07-05  26   &lt;NA&gt; 
#&gt; 6 ecclimate KENTVILLE CDA CS maxtemp 1999-07-06  25.3 &lt;NA&gt; </div><div class='input'>
<span class='co'># create a mudata object starting from a parameter-wide data frame</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>tidyr</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘dplyr’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:lubridate’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, union</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'>
<span class='co'># gather columns and summarise replicates</span>
<span class='no'>datatable</span> <span class='kw'>&lt;-</span> <span class='no'>pocmaj</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/gather.html'>gather</a></span>(<span class='no'>Ca</span>, <span class='no'>Ti</span>, <span class='no'>V</span>, <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"param"</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"param_value"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>core</span>, <span class='no'>param</span>, <span class='no'>depth</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span>(<span class='kw'>value</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>param_value</span>), <span class='kw'>sd</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>param_value</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>rename</a></span>(<span class='kw'>location</span> <span class='kw'>=</span> <span class='no'>core</span>)

<span class='co'># create mudata object</span>
<span class='fu'>mudata</span>(<span class='no'>datatable</span>)</div><div class='output co'>#&gt; <span class='message'>Guessing x columns: depth</span></div><div class='output co'>#&gt; A mudata object aligned along "depth"
#&gt;   distinct_datasets():  "default"
#&gt;   distinct_locations(): "MAJ-1", "POC-2"
#&gt;   distinct_params():    "Ca", "Ti", "V"
#&gt;   src_tbls():           "data", "locations" ... and 3 more
#&gt; 
#&gt; tbl_data() %&gt;% head():
#&gt; # A tibble: 6 x 6
#&gt;   dataset location param depth value    sd
#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 default MAJ-1    Ca        0 1885. 1885.
#&gt; 2 default MAJ-1    Ca        1 1418  1418 
#&gt; 3 default MAJ-1    Ca        2 1550  1550 
#&gt; 4 default MAJ-1    Ca        3 1448  1448 
#&gt; 5 default MAJ-1    Ca        4 1247  1247 
#&gt; 6 default MAJ-1    Ca        5 1412. 1412.</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dewey Dunnington.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


